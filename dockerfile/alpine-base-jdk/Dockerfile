# JVM 在 Docker 等容器环境下的资源限制问题 
# https://blog.yuanbin.me/posts/2019-03/2019-03-18_23-30-06/
# https://segmentfault.com/a/1190000021392583?utm_medium=referral

FROM javachen/alpine-base

ENV JAVA_HOME=/usr/lib/jvm/java-1.8-openjdk
ENV PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/jvm/java-1.8-openjdk/jre/bin:/usr/lib/jvm/java-1.8-openjdk/bin

RUN set -x \
	&& apk add --no-cache openjdk8="8.201.08-r1" \
	&& curl -L https://alibaba.github.io/arthas/install.sh | sh \
    && mv as.sh /usr/bin/as.sh


CMD ["java", "-XX:InitialRAMPercentage=10.0", "-XX:MaxRAMPercentage=50.0", "-XshowSettings:vm", "-version"]